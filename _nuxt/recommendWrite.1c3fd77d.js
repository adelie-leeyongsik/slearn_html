import{_ as z}from"./Select.c0424bc0.js";import{_ as G,V as T,k as O,r as W,x as X,g as A,l as p,h as x,E as J,w as H,a0 as K,v as g,o as m,a as t,d as u,y as h,z as S,i as a,b as U,c as _,s as Q,t as k,F as Y,N as Z,p as ee,e as te}from"./entry.e1c54084.js";const c=f=>(ee("data-v-7f6ac2c5"),f=f(),te(),f),se={class:"c-modals"},oe=c(()=>t("div",{class:"c-modals__bg"},null,-1)),le={class:"c-modals__inner scroll"},ae={class:"c-modals__head"},ie={class:"c-modals__contents"},ce=c(()=>t("div",{class:"c-modals__title"}," 좋은 강의를 다른 사람에게 추천해보세요. ",-1)),ne=c(()=>t("p",null,"(추천하신 내용은 관리자 검토 후 게재됩니다)",-1)),re={class:"c-form-group"},de=c(()=>t("label",{for:"route01",class:"c-form-label"},[t("span",{class:"c-essential"},"*"),u(" 제목")],-1)),pe=c(()=>t("div",{class:"c-text-caution"}," 추천하실 강좌의 제목을 입력해주세요 ",-1)),me={class:"c-form-group"},ue=c(()=>t("div",{class:"c-form-label"},[t("span",{class:"c-essential"},"*"),u(" 대분류/소분류 ")],-1)),fe={class:"c-input-group c-input-group--type02"},ge={class:"c-form-group"},_e={for:"file",class:"c-form-label"},ye={key:0,class:"c-essential"},he=c(()=>t("input",{class:"c-form-control",type:"text",placeholder:"파일 첨부해주세요.",readonly:!0},null,-1)),Ce=c(()=>t("button",{class:"c-btn c-btn-sm c-btn-blue"},"파일 첨부",-1)),be={class:"c-form-file"},ve={href:"#"},xe=["onClick"],Se=c(()=>t("i",{class:"ico ico-delete"},"삭제",-1)),Le=[Se],Fe=c(()=>t("br",null,null,-1)),Ue=["href"],ke={class:"c-card-img"},De=["src"],qe=c(()=>t("div",{class:"c-text-caution"}," jpg, jpeg, png 형식의 1MB이하 파일 (추천size : 300*300) ",-1)),Ee={class:"c-form-group"},we=c(()=>t("label",{for:"route02",class:"c-form-label"},[t("span",{class:"c-essential"},"*"),u(" 경로")],-1)),Re=c(()=>t("div",{class:"c-text-caution"}," 추천하실 강좌의 URL을 입력해주세요. (예시:https://www.youtube.com/watch?v=XXX...) ",-1)),Ie={class:"c-form-group"},Ve=c(()=>t("label",{for:"route03",class:"c-form-label"},[t("span",{class:"c-essential"},"*"),u(" 추천사유")],-1)),Be={class:"c-modals__button"},Ne={class:"c-btn-group"},Me={__name:"recommendWrite",props:["show","saveFlag","ctntRcmdSeq","rcmdCtntStat","title","parentCateCode","cateCode","fileSeq","url","applyDesc","rjctDesc"],emits:["close","getCourseData"],setup(f,{expose:D,emit:L}){const d=f,C=T(),r=O();D({openPopUpEvent:q});function q(l,s,i,o,n,y,v,P,$,j){e.ctntRcmdSeq=l,e.rcmdCtntStat=s,e.title=i,e.bigCategory=o,F(o),e.midCategory=n,e.thumbnail=y,e.fileSeq=v,e.recommUrl=P,e.applyDesc=$,e.rjctDesc=j}const e=W({userId:X("userid"),ctntRcmdSeq:"",title:"",bigCategory:"",bigCategoryList:[],midCategory:"",midCategoryList:[],fileList:[],fileIndex:"",delFileSeq:"",recommUrl:"",applyDesc:"",rcmdCtntStat:"",thumbnail:"",fileSeq:"",rjctDesc:""});A(()=>{p.isEmpty(e.userId)||E()});const E=async()=>{console.log("getCategory"),await x({method:"get",id:"관심추천 대분류검색",endpoint:"/api/sq/prefer/list",data:{preferCode:"PREFER_P01"},onResponse({data:l,status:s,message:i}){console.log("data ",l),console.log("status ",s),console.log("message ",i),l.forEach(o=>{o.text=o.stdClsTxt,o.value=o.stdClsCode}),e.bigCategoryList=l,e.bigCategoryList.unshift({text:"대분류 선택해 주세요.",value:""}),e.midCategoryList.unshift({text:"중분류 선택해 주세요.",value:""})}})},F=async l=>{e.bigCategory=l,e.midCategory="",await x({method:"get",id:"관심추천 중분류검색",endpoint:"/api/sq/course/category",data:{parentCateCode:l},onResponse({data:s,status:i,message:o}){console.log("data ",s),console.log("status ",i),console.log("message ",o),s.forEach(n=>{n.text=n.courseCateName,n.value=n.courseCateCode}),e.midCategoryList=s,e.midCategoryList.unshift({text:"중분류 선택해 주세요.",value:""})}})},w=async l=>{e.midCategory=l},R=l=>{let s=l.target.files[0].size,i=1*1024*1024;if(s>i)return r.alert("알림","첨부파일 사이즈는 1MB 이내로 등록 가능합니다."),!1;let o=l.target.files[0].name,n=["JPG","JPEG","PNG"],y=o.substr(o.lastIndexOf(".")+1).toUpperCase();return n.filter(v=>v===y).length===0?(r.alert("알림","파일등록이 불가능한 확장자입니다. <br/> 파일을 확인 후 다시 시도해주시길 바랍니다."),!1):e.fileList.length>=1?(r.alert("알림","파일은 1개 까지만 등록할 수 있습니다."),!1):!0},I=l=>{if(R(l)){let i=l.target.files[0];if(e.fileList.length>0){let o=e.fileList.map(n=>n.name).indexOf(i.name);o!=-1&&e.fileList.splice(o,1)}e.fileList.push(i)}else C.value.value=null},V=(l,s)=>{e.fileIndex=l,e.delFileSeq=s,r.confirm("알림","파일을 삭제하시겠습니까?",B)},B=()=>{typeof e.delFileSeq<"u"&&e.delFileList.push(e.delFileSeq),e.fileList.splice(e.fileIndex,1)},N=async()=>{let l={ctntRcmdSeq:e.ctntRcmdSeq,parentCateCode:e.bigCategory,cateCode:e.midCategory,url:e.recommUrl,applyDesc:e.applyDesc,file:e.fileList,title:e.title};if(p.isEmpty(e.title)){r.alert("알림","제목을 입력해주세요.");return}if(p.isEmpty(e.bigCategory)){r.alert("알림","대분류를 선택해주세요.");return}if(p.isEmpty(e.midCategory)){r.alert("알림","중분류를 선택해주세요.");return}if(p.isEmpty(e.fileList)&&d.saveFlag!="U"){r.alert("알림","썸네일을 첨부해주세요.");return}if(p.isEmpty(e.recommUrl)){r.alert("알림","경로를 입력해주세요.");return}if(p.isEmpty(e.applyDesc)){r.alert("알림","추천사유를 입력해주세요.");return}console.log("====props.saveFlag==>"+d.saveFlag+"==onSave==param==>",l);const s=new FormData;s.append("ctntRcmdSeq",e.ctntRcmdSeq),s.append("parentCateCode",e.bigCategory),s.append("cateCode",e.midCategory),s.append("url",e.recommUrl),s.append("applyDesc",e.applyDesc),s.append("title",e.title),e.fileList.forEach(i=>{s.append("file",i)}),await x({method:d.saveFlag=="I"?"post":"put",id:"강의추천",endpoint:"/api/sq/my/course/rcmd",headers:"FILE_UPLOAD",data:s,onResponse({data:i,status:o,message:n}){o===200&&r.confirm("알림","입력한 내용으로 강의 추천을 진행합니다. <br/> 관리자가 확인(승인) 후 수정하실 수 없습니다. <br/> 등록하시겠습니까?",()=>{L("getCourseData",0),b(),L("close")})}})},b=async()=>{e.title="",e.bigCategory="",e.midCategory="",e.fileList=[],e.fileIndex="",e.thumbnail="",e.delFileSeq="",e.fileSeq="",e.recommUrl="",e.applyDesc="",e.saveFlag=""},M=()=>{C.value.click()};return(l,s)=>{const i=z;return d.show?(m(),J(K,{key:0,name:"c-modals"},{default:H(()=>[t("div",se,[oe,t("div",le,[t("div",ae,[u(" 강의 추천 "),t("button",{class:"c-modals__head-close",type:"submit",onClick:s[0]||(s[0]=o=>{l.$emit("close"),b()})}," 닫기 ")]),t("div",ie,[ce,ne,t("div",re,[de,h(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>a(e).title=o),type:"text",class:"c-form-control",id:"route01",placeholder:"추천하실 강좌의 제목"},null,512),[[S,a(e).title]]),pe]),t("div",me,[ue,t("div",fe,[U(i,{modelValue:a(e).bigCategory,"onUpdate:modelValue":[s[2]||(s[2]=o=>a(e).bigCategory=o),F],options:a(e).bigCategoryList},null,8,["modelValue","options"]),U(i,{modelValue:a(e).midCategory,"onUpdate:modelValue":[s[3]||(s[3]=o=>a(e).midCategory=o),w],options:a(e).midCategoryList},null,8,["modelValue","options"])])]),t("div",ge,[t("label",_e,[d.saveFlag!=="U"?(m(),_("span",ye,"*")):g("",!0),u(" 썸네일")]),t("div",{class:"c-input-group",onClick:M},[he,h(t("input",{ref_key:"fileUpload",ref:C,id:"fileUpload",class:"c-form-control",type:"file",placeholder:"파일 첨부해주세요.",onChange:I},null,544),[[Z,!1]]),Ce]),a(e).fileList?(m(!0),_(Y,{key:0},Q(a(e).fileList,(o,n)=>(m(),_("div",be,[t("a",ve,k(o.name),1),t("button",{onClick:y=>V(n,o.fileSeq)},Le,8,xe)]))),256)):g("",!0),Fe,a(e).thumbnail?(m(),_("a",{key:1,href:a(e).thumbnail,target:"_blank",class:"c-card c-card--border"},[t("p",ke,[t("img",{src:a(e).thumbnail,alt:"썸네일 이미지",style:{width:"300px",height:"300px"}},null,8,De)])],8,Ue)):g("",!0),qe]),t("div",Ee,[we,h(t("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>a(e).recommUrl=o),type:"text",class:"c-form-control",id:"route02",placeholder:"추천하실 강좌의 URL"},null,512),[[S,a(e).recommUrl]]),Re]),t("div",Ie,[Ve,h(t("textarea",{"onUpdate:modelValue":s[5]||(s[5]=o=>a(e).applyDesc=o),id:"route03",class:"c-form-control c-form-control-sm",placeholder:"추천사유 입력"},null,512),[[S,a(e).applyDesc]])]),t("div",Be,[t("div",Ne,[t("button",{type:"submit",class:"c-btn c-btn-blue",onClick:s[6]||(s[6]=o=>{l.$emit("close"),b()})}," 취소 "),d.saveFlag!=="S"?(m(),_("button",{key:0,type:"submit",class:"c-btn c-btn-danger",onClick:N},k(d.saveFlag=="I"?"등록":"수정"),1)):g("",!0)])])])])])]),_:1})):g("",!0)}}},je=G(Me,[["__scopeId","data-v-7f6ac2c5"]]);export{je as default};
