import{_ as V}from"./breadCrumbs.86a21415.js";import{_ as F}from"./title.fb65f11f.js";import{_ as q}from"./CalendarFilter.b1877e2c.js";import{_ as G}from"./pagination.86fa1564.js";import{_ as j,k as z,f as J,r as O,C as m,m as h,g as K,x as N,h as g,c as r,b as _,a as e,w as H,i as n,F as y,s as Y,t as d,v as M,y as R,S as T,E as Q,o as l,d as f,a_ as W,ar as X,$ as Z,p as ee,e as te}from"./entry.e1c54084.js";import{_ as se}from"./ch-table.6edba30c.js";import oe from"./_snb.5c7ca73e.js";import ne from"./_snbTablet.5be258ab.js";import"./Radio.ef28b89a.js";import"./Input.9ccbf189.js";import"./main.2d4970b0.js";import"./1.5c1c421a.js";const a=p=>(ee("data-v-cd805dd3"),p=p(),te(),p),ae={class:"mypage"},ce={class:"mypage-report"},le={class:"mypage__wrap"},re={class:"mypage__contents"},de={class:"mypage__contents-head"},ie={class:"mypage__contents-head-btn-wrap"},_e=a(()=>e("div",{class:"mypage__contents-head-btn-text"},[f(" 평생학습 포털 인증하시면"),e("br"),f(" 수강 이력을 한눈에 보실수 있어요 ")],-1)),pe={class:"mypage__contents-body"},ue={key:0,class:"lecture-list lecture-list--type02"},me={class:"lecture-list__item-thumb"},he=["src","alt"],ge={class:"lecture-list__item-text"},ye={class:"lecture-list__item-btn"},ve=["onClick"],be={key:1,class:"lecture-list"},De=a(()=>e("div",{class:"lecture-list__text"}," 신청하신 전문강의가 없습니다. 다음 신청 기간에 꼭 신청하셔서 다양한 학습 기회를 누리세요 ",-1)),Ce=[De],fe=a(()=>e("div",{class:"c-badge c-badge-primary"},"알림",-1)),we=a(()=>e("div",{class:"lecture__title lecture__title--type02"},"수강 이력",-1)),ke={class:"mypage__contents-search"},Ne={class:"c-form-group"},Ye=a(()=>e("label",{for:"status",class:"c-form-label"},"과정 분류별",-1)),Me=a(()=>e("option",{value:"ALL",selected:""},"전체",-1)),Re=a(()=>e("option",{value:"A"},"교과",-1)),Te=a(()=>e("option",{value:"B"},"비교과",-1)),Ie=a(()=>e("option",{value:"C"},"오픈강좌",-1)),Le=[Me,Re,Te,Ie],Se={class:"c-form-group"},xe={class:"mypage__contents-body"},$e={class:"c-table__wrap c-table__wrap-scroll"},Pe={class:"c-table__head"},Be=a(()=>e("option",{value:"N"},"최근 수강 순",-1)),Ue=a(()=>e("option",{value:"C"},"진도율 순",-1)),Ae=[Be,Ue],Ee={class:"c-table c-table-center"},Ve=a(()=>e("caption",null," 수강이력 리스트로 과정분류, 업체명, 강좌명, 최종 수강일자, 진도율 을 볼수 있습니다. ",-1)),Fe=a(()=>e("colgroup",null,[e("col",{width:"110"}),e("col",{width:"130"}),e("col",{width:""}),e("col",{width:"150"}),e("col",{width:"100"}),e("col",{width:"90"})],-1)),qe=a(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"과정분류"),e("th",{scope:"col"},"업체명"),e("th",{scope:"col"},"강좌명"),e("th",{scope:"col"},"최종 수강일자"),e("th",{scope:"col"},"진도율"),e("th",{scope:"col"},"상태")])],-1)),Ge={class:"c-clamp"},je={class:"c-table__title"},ze={href:"javascript:void(0)"},Je={key:0},Oe={key:1},Ke=a(()=>e("td",null,"-",-1)),He=a(()=>e("td",null,"-",-1)),Qe={class:"c-text-danger"},We={class:"c-progress"},Xe={key:1,class:"border-0"},Ze=a(()=>e("td",{colspan:"6"},[e("div",{class:"c-table__nodata"},[e("img",{src:se,alt:"조회 기간내 수강이력이 없습니다"}),e("p",null,"조회 기간내 수강이력이 없습니다"),e("ul",null,[e("li",null,[e("strong",null,"1. 사이트 바로가기 클릭")]),e("li",null,[e("strong",null,"2. 해당 사이트에서 듣고자 하는 강좌 신청")])])])],-1)),et=[Ze],tt={__name:"index",setup(p){const I=z(),L=J(),s=O({searchType:"ALL",isAlert:!1,sortType:"N",startDate:m(h().add(-1,"months"),"YYYYMMDD"),endDate:m(h(),"YYYYMMDD"),data:{course:{rows:[],totalRecords:""},cp:[]}});K(()=>{u(),S(),N("mentorYn")==="N"&&N("memberJoinTypeCode")!=="JOINKND_001"&&$()});const S=async()=>{await g({id:"마이페이지 내 수강 이력 조회",endpoint:"/api/sq/my/cp",headers:"PUBLIC",onResponse({data:o}){return console.log("cp>>>",o),s.data.cp=o,!0}})},x=o=>/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(o),$=async()=>{await g({id:"cp 변경 기간 조회",endpoint:"/api/sq/my/course/modify",headers:"PUBLIC",onResponse({data:o}){console.log("cp 변경 기간 조회>>",o),o.dtm==="now"&&(s.isAlert=!0)}})},u=async()=>{await g({id:"마이페이지 내 수강 이력 조회",endpoint:"/api/sq/my/course/list",headers:"PUBLIC",data:{startDtm:s.startDate,endDtm:s.endDate,courseCate:s.searchType,sortType:s.sortType,pageSize:10,pageNumber:s.data.course.pageNumber,order:"DESC"},onResponse({data:o}){return console.log("수강 이력 조회 Course >> ",o),s.data.course=o,!0}})},P=o=>{s.data.course.pageNumber=o,u()},B=(o,c)=>{s.startDate=o,s.endDate=c,u()},U=()=>{I.alert("알림","회원정보 변경에 평생학습포털 이용동의를 진행해주세요.",()=>{L.push("/mypage/pw-check")})},A=async()=>{await g({id:"파일 다운로드 API",endpoint:"/api/sq/my/course/list/down",responseType:"blob",data:{courseCate:"ALL",sortType:s.sortType,pageSize:1e7,pageNumber:0,order:"DESC"},onResponse({response:o,headers:c}){const v=new Blob([o]),b=window.URL.createObjectURL(v),i=document.createElement("a");i.href=b,i.style.display="none";const D=()=>`나의수강현황_${h().format("YYYYMMDD")}.xlsx`;return i.download=D(),document.body.appendChild(i),i.click(),i.remove(),!0}})},E=o=>{window.open(o)};return(o,c)=>{var C,w,k;const v=V,b=F,i=q,D=G;return l(),r("div",ae,[_(ne),_(v),e("div",ce,[e("div",le,[_(oe),e("div",re,[e("div",de,[_(b,{title:"수강관리",desc:`해당하는 사이트에서 강좌명을 복사한 후 해당 사이트에서\r
                검색하세요.<br />\r
                도움이 필요하실 땐 서울런 고객센터(1533-0909)로 연락주세요!`},{tail:H(()=>[e("div",ie,[_e,e("button",{class:"c-btn c-btn-danger c-btn-sm",onClick:c[0]||(c[0]=t=>U())}," 연동 바로가기 ")])]),_:1})]),e("div",pe,[n(s).data.cp.length>0?(l(),r("div",ue,[(l(!0),r(y,null,Y(n(s).data.cp,t=>(l(),r("div",{class:"lecture-list__item",key:t},[e("div",me,[e("img",{src:t.nonActvLogoImgFile,alt:`${t.cpName} 로고`},null,8,he)]),e("div",ge,[e("p",null,[f(" 시작일 "),e("span",null,d(("uConvertDate"in o?o.uConvertDate:n(m))(t.connDtm,"YYYY.MM.DD")),1)])]),e("div",ye,[e("button",{class:"c-btn",onClick:st=>("uGoToLearnSite"in o?o.uGoToLearnSite:n(W))(("uIsMobileDevice"in o?o.uIsMobileDevice:n(X))()?t.mobUrl:t.pcUrl,t.cpId)}," 바로가기 ",8,ve)])]))),128))])):(l(),r("div",be,Ce)),n(s).isAlert?(l(),r("a",{key:2,href:"#",class:"mypage__schedule-item",onClick:c[1]||(c[1]=t=>E("/preview"))},[fe,e("p",null," 현재 수강 사이트를 "+d(n(h)().month()+1)+"월 부터 변경하실 수 있어요. 미리 확인해 보실래요? ",1)])):M("",!0),we,e("div",ke,[e("div",Ne,[Ye,R(e("select",{class:"c-form-control c-form-control-sm",id:"status",title:"과정 분류별 셀렉트 박스","onUpdate:modelValue":c[2]||(c[2]=t=>n(s).searchType=t)},Le,512),[[T,n(s).searchType]])]),e("div",Se,[_(i,{minDate:n(s).minDate,onChanged:B},null,8,["minDate"])])]),e("div",xe,[e("div",$e,[e("div",Pe,[e("p",null,"총 "+d(n(s).data.course.totalRecords)+"개",1),e("div",null,[e("button",{class:"c-btn c-btn--excel",onClick:c[3]||(c[3]=t=>A())}," 엑셀 다운로드 "),R(e("select",{title:"정렬 셀렉트 박스","onUpdate:modelValue":c[4]||(c[4]=t=>n(s).sortType=t),onChange:c[5]||(c[5]=t=>u())},Ae,544),[[T,n(s).sortType]])])]),e("table",Ee,[Ve,Fe,qe,e("tbody",null,[n(s).data.course.rows.length>0?(l(!0),r(y,{key:0},Y(n(s).data.course.rows,t=>(l(),r("tr",null,[e("td",null,d(t.courseCateName),1),e("td",null,[e("span",Ge,d(x(t.origin)?t.origin:"-"),1)]),e("td",je,[e("p",null,[e("a",ze,d(t.courseName),1)])]),t.eduEndDt?(l(),r("td",Je,d(`${("uConvertDate"in o?o.uConvertDate:n(m))(t.eduEndDt,"YYYY.MM.DD")}`),1)):(l(),r("td",Oe,"-")),t.courseCateName=="오픈강좌"?(l(),r(y,{key:2},[Ke,He],64)):(l(),r(y,{key:3},[e("td",null,[e("strong",Qe,d(t.progRate?t.progRate:0)+"%",1),e("div",We,[e("span",{class:"c-progress-bar",style:Z(`width: ${t.progRate?t.progRate:0}%`)},null,4)])]),e("td",null,[e("strong",null,d(t.studyCmptYn),1)])],64))]))),256)):(l(),r("tr",Xe,et))])])]),((k=(w=(C=n(s).data)==null?void 0:C.course)==null?void 0:w.rows)==null?void 0:k.length)>0?(l(),Q(D,{key:0,pageNumber:n(s).data.course.pageNumber,totalRecords:n(s).data.course.totalRecords,totalPages:n(s).data.course.totalPages,onChangedPageIndex:P},null,8,["pageNumber","totalRecords","totalPages"])):M("",!0)])])])])])])}}},ht=j(tt,[["__scopeId","data-v-cd805dd3"]]);export{ht as default};
