import{_ as v}from"./Radio.ef28b89a.js";import{k as A,O as B,V as U,r as V,g as E,af as M,Z as N,l as y,o as n,c as f,b as q,i as a,v as u,a as i,t as p,y as z,N as w,F as C,s as D}from"./entry.e1c54084.js";const H={key:0,class:"c-form-group"},P=i("div",{class:"c-form-label"},"증빙자료 첨부유형",-1),$={key:1,class:"c-form-group"},O={for:"file",class:"c-form-label"},R=i("input",{class:"c-form-control",type:"text",placeholder:"파일 첨부해주세요.",id:"file",title:"파일 첨부",name:"file",readonly:!0},null,-1),j=i("button",{class:"c-btn c-btn-sm c-btn-blue"},"파일 찾기",-1),G={key:0,class:"c-text-caution"},Z={class:"c-form-file"},J={href:"#"},K=["onClick"],Q=i("i",{class:"ico ico-delete"},"삭제",-1),W=[Q],ee={__name:"AttachFile",props:{attachType:{type:Boolean,default:!1},labelTitle:{type:String,default:""},caution:{type:Boolean,default:!1},dataList:{type:Array,default:[]},boardName:{type:String,default:""}},emits:["onFileInfo","onDelFileInfo"],setup(F,{emit:_}){const c=F,d=A(),x=B(),m=U(),e=V({fileType:!0,fileList:[],fileIndex:null,delFileSeq:null,delFileList:[],fileInfo:{},attachCode:"ATTACH_P001",attachCodeList:[{text:"파일 첨부",value:"ATTACH_P001",column:!1},{text:"별도 송부",value:"ATTACH_P002",column:!1}]});E(async()=>{e.fileInfo=await M(c.boardName)}),N(()=>c.dataList,t=>{y.isEmpty(t)||(e.fileList=t)},{immediate:!0});const L=t=>{let o=t.target.files[0].size,s=e.fileInfo.attaFileMaxSize*1024*1024;if(o>s)return d.alert("알림",`첨부파일 사이즈는 ${e.fileInfo.attaFileMaxSize}MB 이내로 등록 가능합니다.`),!1;let l=t.target.files[0].name,r=e.fileInfo.attaFileUseExt.split(","),h=l.substr(l.lastIndexOf(".")+1).toUpperCase();return r.filter(k=>k===h).length===0?(d.alert("알림","파일등록이 불가능한 확장자입니다. <br/> 파일을 확인 후 다시 시도해주시길 바랍니다."),!1):e.fileList.length>=e.fileInfo.attaFileAllowCnt?(d.alert("알림",`파일은 ${e.fileInfo.attaFileAllowCnt}개 까지만 등록할 수 있습니다.`),!1):!0},g=t=>{if(L(t)){let s=t.target.files[0];if(e.fileList.length>0){let l=e.fileList.map(r=>r.name).indexOf(s.name);l!=-1&&e.fileList.splice(l,1)}e.fileList.push(s),_("onFileInfo",e.fileList)}else m.value.value=null},I=(t,o)=>{e.fileIndex=t,e.delFileSeq=o,d.confirm("알림","파일을 삭제하시겠습니까?",b)},b=()=>{typeof e.delFileSeq<"u"&&(e.delFileList.push(e.delFileSeq),_("onDelFileInfo",e.delFileList)),e.fileList.splice(e.fileIndex,1)},S=t=>{e.fileType=!!y.isEqual(t,"ATTACH_P001"),e.attachCode=t,x.joinAttachType=e.attachCode},T=()=>{m.value.click()};return(t,o)=>{const s=v;return n(),f(C,null,[c.attachType?(n(),f("div",H,[P,q(s,{modelValue:a(e).attachCode,"onUpdate:modelValue":[o[0]||(o[0]=l=>a(e).attachCode=l),S],items:a(e).attachCodeList},null,8,["modelValue","items"])])):u("",!0),a(e).fileType?(n(),f("div",$,[i("label",O,p(c.labelTitle),1),i("div",{class:"c-input-group",onClick:T},[R,z(i("input",{ref_key:"fileUpload",ref:m,id:"fileUpload",title:"파일 첨부",name:"fileUpload",class:"c-form-control",type:"file",placeholder:"파일 첨부해주세요.",onChange:g},null,544),[[w,!1]]),j]),c.caution?(n(),f("div",G,p(a(e).fileInfo.attaFileUseExt)+" 형식으로 최대 "+p(a(e).fileInfo.attaFileMaxSize)+"MB 첨부 가능 ",1)):u("",!0),a(e).fileList?(n(!0),f(C,{key:1},D(a(e).fileList,(l,r)=>(n(),f("div",Z,[i("a",J,p(l.name),1),i("button",{onClick:h=>I(r,l.fileSeq)},W,8,K)]))),256)):u("",!0)])):u("",!0)],64)}}};export{ee as _};
