import{_ as P}from"./Select.c0424bc0.js";import{_ as q,k as N,V as D,r as M,x as R,g as $,l as d,h as _,E as z,w as G,a0 as O,v as C,o as g,a as t,d as m,y as u,z as h,i,b,c as v,s as j,t as A,F as J,N as H,p as K,e as Q}from"./entry.e1c54084.js";const n=p=>(K("data-v-da95b724"),p=p(),Q(),p),W={class:"c-modals"},X=n(()=>t("div",{class:"c-modals__bg"},null,-1)),Y={class:"c-modals__inner scroll"},Z={class:"c-modals__head"},ee={class:"c-modals__contents"},te=n(()=>t("div",{class:"c-modals__title"}," 좋은 강의를 다른 사람에게 추천해보세요. ",-1)),oe=n(()=>t("p",null,"(추천하신 내용은 관리자 검토 후 게재됩니다)",-1)),se={class:"c-form-group"},le=n(()=>t("label",{for:"route02",class:"c-form-label"},[t("span",{class:"c-essential"},"*"),m(" 제목")],-1)),ie={class:"c-form-group"},ae=n(()=>t("div",{class:"c-form-label"},[t("span",{class:"c-essential"},"*"),m(" 대분류/소분류 ")],-1)),ne={class:"c-input-group c-input-group--type02"},ce={class:"c-form-group"},re=n(()=>t("label",{for:"file",class:"c-form-label"},[t("span",{class:"c-essential"},"*"),m(" 썸네일")],-1)),de=n(()=>t("input",{class:"c-form-control",type:"text",title:"파일 첨부",placeholder:"파일 첨부해주세요.",readonly:!0},null,-1)),me=n(()=>t("button",{class:"c-btn c-btn-sm c-btn-blue"},"파일 첨부",-1)),pe={class:"c-form-file"},ue={href:"#"},fe=["onClick"],_e=n(()=>t("i",{class:"ico ico-delete"},"삭제",-1)),ge=[_e],he=n(()=>t("div",{class:"c-text-caution"}," jpg, jpeg, png 형식의 1MB이하 파일 (추천size : 300*300) ",-1)),ye={class:"c-form-group"},Ce=n(()=>t("label",{for:"route02",class:"c-form-label"},[t("span",{class:"c-essential"},"*"),m(" 경로")],-1)),be=n(()=>t("div",{class:"c-text-caution"}," 추천하실 강좌의 URL(예시 : https://www.youtube.com/watch?v=D0oipIheaUM)을 입력해주세요 ",-1)),ve={class:"c-form-group"},xe=n(()=>t("label",{for:"route03",class:"c-form-label"},[t("span",{class:"c-essential"},"*"),m(" 추천사유")],-1)),Le={class:"c-modals__button"},Ee={class:"c-btn-group"},Ue={__name:"recommendPopup",props:{isShow:{type:Boolean,default:!1}},emits:["close"],setup(p,{emit:x}){const L=p,c=N(),f=D(),e=M({userId:R("userid"),bigCategory:"",bigCategoryList:[],midCategory:"",midCategoryList:[],fileList:[],fileIndex:"",delFileSeq:"",recommUrl:"",recommText:"",recommTitle:""});$(()=>{d.isEmpty(e.userId)||E()});const E=async()=>{console.log("getCategory"),await _({method:"get",id:"관심추천 대분류검색",endpoint:"/api/sq/prefer/list",data:{preferCode:"PREFER_P01"},onResponse({data:l,status:o,message:a}){console.log("data ",l),console.log("status ",o),console.log("message ",a),l.forEach(s=>{s.text=s.stdClsTxt,s.value=s.stdClsCode}),e.bigCategoryList=l,e.bigCategoryList.unshift({text:"대분류 선택해 주세요.",value:""}),e.midCategoryList.unshift({text:"중분류 선택해 주세요.",value:""})}})},U=async l=>{e.bigCategory=l,e.midCategory="",await _({method:"get",id:"관심추천 중분류검색",endpoint:"/api/sq/course/category",data:{parentCateCode:l},onResponse({data:o,status:a,message:s}){console.log("data ",o),console.log("status ",a),console.log("message ",s),o.forEach(r=>{r.text=r.courseCateName,r.value=r.courseCateCode}),e.midCategoryList=o,e.midCategoryList.unshift({text:"중분류 선택해 주세요.",value:""})}})},k=async l=>{e.midCategory=l},S=l=>{let o=l.target.files[0].size,a=1*1024*1024;if(o>a)return c.alert("알림","첨부파일 사이즈는 1MB 이내로 등록 가능합니다."),!1;let s=l.target.files[0].name,r=["JPG","JPEG","PNG"],y=s.substr(s.lastIndexOf(".")+1).toUpperCase();return r.filter(B=>B===y).length===0?(c.alert("알림","파일등록이 불가능한 확장자입니다. <br/> 파일을 확인 후 다시 시도해주시길 바랍니다."),!1):e.fileList.length>=1?(c.alert("알림","파일은 1개 까지만 등록할 수 있습니다."),!1):!0},V=l=>{if(S(l)){let a=l.target.files[0];if(e.fileList.length>0){let s=e.fileList.map(r=>r.name).indexOf(a.name);s!=-1&&e.fileList.splice(s,1)}e.fileList.push(a)}else f.value.value=null},w=(l,o)=>{e.fileIndex=l,e.delFileSeq=o,c.confirm("알림","파일을 삭제하시겠습니까?",T)},T=()=>{typeof e.delFileSeq<"u"&&e.delFileList.push(e.delFileSeq),e.fileList.splice(e.fileIndex,1)},F=()=>{if(d.isEmpty(e.recommTitle)){c.alert("알림","제목을 입력해주세요.");return}if(d.isEmpty(e.bigCategory)){c.alert("알림","대분류를 선택해주세요.");return}if(d.isEmpty(e.midCategory)){c.alert("알림","중분류를 선택해주세요.");return}if(d.isEmpty(e.fileList)){c.alert("알림","썸네일을 첨부해주세요.");return}if(d.isEmpty(e.recommUrl)){c.alert("알림","경로를 입력해주세요.");return}if(d.isEmpty(e.recommText)){c.alert("알림","추천사유를 입력해주세요.");return}c.confirm("알림","입력한 내용으로 강의 추천을 진행합니다. <br/> 관리자가 확인 후 수정하실 수 없습니다. <br/> 등록하시겠습니까?",()=>{const l=new FormData;l.append("title",e.recommTitle),l.append("parentCateCode",e.bigCategory),l.append("cateCode",e.midCategory),l.append("url",e.recommUrl),l.append("applyDesc",e.recommText),e.fileList.forEach(o=>{l.append("file",o)}),_({method:"post",id:"강의추천",endpoint:"/api/sq/my/course/rcmd",headers:"FILE_UPLOAD",data:l,onResponse({data:o,status:a,message:s}){a===200&&x("close")}})})},I=()=>{f.value.click()};return(l,o)=>{const a=P;return L.isShow?(g(),z(O,{key:0,name:"c-modals"},{default:G(()=>[t("div",W,[X,t("div",Y,[t("div",Z,[m(" 강의 추천 "),t("button",{class:"c-modals__head-close",type:"submit",onClick:o[0]||(o[0]=s=>l.$emit("close"))}," 닫기 ")]),t("div",ee,[te,oe,t("div",se,[le,u(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>i(e).recommTitle=s),type:"text",class:"c-form-control",id:"route02",title:"route02",placeholder:"제목을 입력해주세요"},null,512),[[h,i(e).recommTitle]])]),t("div",ie,[ae,t("div",ne,[b(a,{modelValue:i(e).bigCategory,"onUpdate:modelValue":[o[2]||(o[2]=s=>i(e).bigCategory=s),U],options:i(e).bigCategoryList,title:"콘텐츠 목록 대분류"},null,8,["modelValue","options"]),b(a,{modelValue:i(e).midCategory,"onUpdate:modelValue":[o[3]||(o[3]=s=>i(e).midCategory=s),k],options:i(e).midCategoryList,title:"콘텐츠 목록 중분류"},null,8,["modelValue","options"])])]),t("div",ce,[re,t("div",{class:"c-input-group",onClick:I},[de,u(t("input",{ref_key:"fileUpload",ref:f,id:"fileUpload",class:"c-form-control",type:"file",title:"파일 첨부",placeholder:"파일 첨부해주세요.",onChange:V},null,544),[[H,!1]]),me]),i(e).fileList?(g(!0),v(J,{key:0},j(i(e).fileList,(s,r)=>(g(),v("div",pe,[t("a",ue,A(s.name),1),t("button",{onClick:y=>w(r,s.fileSeq)},ge,8,fe)]))),256)):C("",!0),he]),t("div",ye,[Ce,u(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>i(e).recommUrl=s),type:"text",class:"c-form-control",id:"route02",title:"route02",placeholder:"추천하실 강좌의 URL"},null,512),[[h,i(e).recommUrl]]),be]),t("div",ve,[xe,u(t("textarea",{"onUpdate:modelValue":o[5]||(o[5]=s=>i(e).recommText=s),id:"route03",class:"c-form-control c-form-control-sm",placeholder:"추천사유 입력"},null,512),[[h,i(e).recommText]])]),t("div",Le,[t("div",Ee,[t("button",{type:"submit",class:"c-btn c-btn-blue",onClick:o[6]||(o[6]=s=>l.$emit("close"))}," 취소 "),t("button",{type:"submit",class:"c-btn c-btn-danger",onClick:F}," 확인 ")])])])])])]),_:1})):C("",!0)}}},Ve=q(Ue,[["__scopeId","data-v-da95b724"]]);export{Ve as default};
