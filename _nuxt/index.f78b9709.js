import{_ as B}from"./CommonContentsModal.1a643f7e.js";import{_ as G}from"./Select.c0424bc0.js";import{_ as O}from"./Countdown.669033c6.js";import{_ as F,f as H,k as J,O as Q,r as W,Q as Z,x as v,Z as K,c as r,b as m,w as C,i as t,a as o,t as T,v as u,F as I,h as g,l,am as X,J as ee,o as n,y as N,z as q,E as L,d as te,bf as se,p as oe,e as ie}from"./entry.e1c54084.js";import{_ as ae}from"./Input.9ccbf189.js";import{_ as le}from"./TermsGroup.575e6ec4.js";import{_ as ne}from"./ic-check.70858d0c.js";import ce from"./_nav.5a01d345.js";import"./Checkbox.20dceeb0.js";const c=f=>(oe("data-v-013652c5"),f=f(),ie(),f),me=["innerHTML"],re={class:"c-modals__form"},de={class:"c-form-group"},ue=c(()=>o("label",{for:"emailAddress",class:"c-form-label"},"이메일 주소",-1)),_e={class:"c-input-group c-input-group--email"},pe={class:"c-input-group"},fe=c(()=>o("p",{class:"c-text-danger",counter:""},null,-1)),be={key:1,class:"c-text-danger"},he=c(()=>o("img",{src:ne,alt:"확인완료"},null,-1)),ve={key:0,class:"c-text-caution c-text-caution--type02 c-text-danger"},Ce={key:1,class:"c-text-caution c-text-caution--type02 c-text-danger"},ge={key:2,class:"c-text-caution c-text-caution--type02 c-text-blue"},ye={class:"c-modals__button"},ke={class:"c-btn-group"},xe={class:"account"},Ee={class:"account__body"},Te={key:0,class:"join"},Ie=c(()=>o("h2",{class:"account__title"},"약관동의 및 본인인증",-1)),Ne={key:0,class:"account__agree"},qe=c(()=>o("div",{class:"account__agree-title"},"‘서울런’ 약관동의",-1)),Le={key:1,class:"join"},Me=c(()=>o("h2",{class:"account__title"},"약관동의 및 본인인증",-1)),Se={class:"account__agree"},Ae=c(()=>o("div",{class:"account__agree-title"},"‘서울런’ 약관동의",-1)),Ve={key:1,class:"c-form-group"},we={class:"c-form-group"},ze=c(()=>o("div",{class:"c-form-label"},"본인인증",-1)),Ye={class:"c-box"},De=c(()=>o("div",{class:"c-box__title"},"휴대폰 인증",-1)),Re=c(()=>o("div",{class:"c-box__title-sub"}," 고객님 명의의 휴대폰으로 인증 ",-1)),Ue={class:"c-box"},$e=c(()=>o("div",{class:"c-box__title"},"이메일 인증",-1)),je=c(()=>o("div",{class:"c-box__title-sub"},"등록된 이메일로 인증",-1)),Pe={class:"account__foot"},Be={class:"c-btn-group"},Ge={__name:"index",setup(f){const b=H(),d=J(),_=Q(),e=W({age14:_.joinInfo.age,termsList:[{key:"term1-id-1",text:"이용약관에 관한 동의",value:!1,required:!0,cpId:"SEOULLEARN",termCode:"TEMPLATE_P002"},{key:"term1-id-2",text:"개인정보 수집/이용에 관한 동의",value:!1,required:!0,cpId:"SEOULLEARN",termCode:"TEMPLATE_P003"}],termInfo:{},btnText:"인증하기",btnDisabled:!1,checkMob:!1,emailModalInfo:{},emailCode:"",emailList:Z(),emailId:"",emailAddr:"",emailText:"인증번호 발송",emailSend:!1,emailTimer:!1,emailCheckNum:"",emailConfirmNum:"",emailConfirm:!1,emailNumEqaul:!1,command:"start",isAgree:v("slAgrRequired"),isCerti:v("identVerRequired"),isSchool:v("schChgAvail"),isLearn:v("lrnpltChgAvail"),btnTxt:"다음"}),k=async s=>{await g({method:"get",id:"회원가입 약관 조회",endpoint:"/api/join/terms",data:{cp_id:s.id,term_div_code:s.code},onResponse({data:i,status:h}){e.termInfo.isShow=!0,e.termInfo.title=i.term_title,e.termInfo.innerContents=i.term_desc}})},M=()=>{b.go(-1)},S=()=>{if(l.isEqual(e.isAgree,"Y")&&e.termsList.some(s=>s.value===!1)){d.alert("알림","약관동의가 필요합니다.");return}if(e.age14>13&&l.isEqual(e.isCerti,"Y")&&!e.checkMob){d.alert("알림","본인인증이 필요합니다.");return}V(),e.age14>18&&l.isEqual(_.joinInfo.join_pcd,"JOIN_P002")?b.push("/revalidation/selectUniv"):l.isEqual(e.isSchool,"Y")||l.isEqual(e.isLearn,"Y")?b.push("/revalidation/learnSite"):g({method:"post",id:"멘토/일반회원 재검증",endpoint:"/api/platform_chg/post",data:{nice_enc_dat:_.passInfo.nice_enc_dat},onResponse({data:s,status:i,message:h}){i===200&&b.push("/")}})},x=()=>{e.termInfo.isShow=!1},A=()=>{if(!(e.checkMob||e.btnDisabled))if(e.termsList.some(s=>s.value===!1)){d.alert("알림","약관동의가 필요합니다.");return}else X()};K(()=>_.passInfo,s=>{l.isEmpty(s)||d.alert("알림","인증이 완료되었습니다.<br/> 다음으로 진행해주시길 바랍니다",()=>{e.checkMob=!0,e.btnText="인증완료",e.btnDisabled=!0})});const V=async()=>{await g({method:"post",id:"서울런 약관동의 및 본인인증",endpoint:"/api/platform_chg/termsAgrAndIdent",data:{nice_enc_dat:_.passInfo.nice_enc_dat,email:e.emailId+"@"+e.emailAddr},onResponse({data:s,status:i}){console.log("data ",s)}})},w=()=>{if(!e.btnDisabled)if(e.termsList.some(s=>s.value===!1)){d.alert("알림","약관동의가 필요합니다.");return}else e.emailConfirm=!1,e.emailNotConfirm=!1,e.emailSend=!1,e.emailConfirmNum="",e.emailTimer=!1,e.emailModalInfo.isShow=!0,e.emailModalInfo.title="이메일 인증",e.emailNumEqaul=!1},y=s=>{!e.emailConfirm&&s&&(e.btnText="인증완료",e.btnDisabled=!0,e.checkMob=s),e.emailModalInfo.isShow=!1},z=s=>{e.emailAddr=s},Y=()=>{e.emailCheckNum="",e.emailSend=!1,e.emailTimer=!0,e.emailNumEqaul=!1,e.emailText="인증번호 재발송"},D=()=>{if(console.log("certiEmail"),e.emailTimer=!1,e.command="restart",l.isEmpty(e.emailId)){d.alert("알림","이메일을 입력해주세요.");return}else if(l.isEmpty(e.emailAddr)){d.alert("알림","이메일을 입력해주세요.");return}g({method:"post",id:"회원가입 이메일 인증",endpoint:"/api/ident_by_email",data:{email:e.emailId+"@"+e.emailAddr},onResponse({data:s,status:i}){if(console.log("data ",s),e.command="start",l.isEqual(s.dupYn,"Y")){d.alert("알림","이메일이 중복되었습니다.");return}else _.emailModalInfo=s,e.emailSend=!0,e.emailConfirmNum=s.crtfNumber}})},R=()=>{console.log("onClickConfirm"),e.emailConfirmNum!=e.emailCheckNum?(d.alert("알림","잘못된 인증번호입니다."),e.emailConfirm=!1,e.emailNumEqaul=!0,e.emailCheckNum=""):(e.emailConfirm=!0,e.emailNumEqaul=!1)},U=()=>{console.log("onCahngeTerms",e.termsList),(e.age14<14&&e.termsList.every(s=>s.value===!0)||l.isEqual(e.isAgree,"Y")&&e.termsList.every(s=>s.value===!0))&&(e.checkMob=!0)};return(s,i)=>{const h=B,$=G,j=O,p=ee,P=ae,E=le;return n(),r(I,null,[m(h,{data:t(e).termInfo,onClose:x},{innerContents:C(()=>[o("div",{class:"c-modals__contents-terms",innerHTML:t(e).termInfo.innerContents},null,8,me),o("div",{class:"c-modals__button"},[o("div",{class:"c-btn-group"},[o("button",{type:"submit",class:"c-btn c-btn-danger",onClick:x}," 확인 ")])])]),_:1},8,["data"]),m(h,{data:t(e).emailModalInfo,onClose:i[6]||(i[6]=a=>y(!1))},{innerContents:C(()=>[o("div",re,[o("div",de,[ue,o("div",_e,[N(o("input",{id:"emailId",class:"c-form-control",type:"text",placeholder:"이메일 아이디",title:"이메일주소 입력","onUpdate:modelValue":i[0]||(i[0]=a=>t(e).emailId=a)},null,512),[[q,t(e).emailId]]),m($,{modelValue:t(e).emailCode,"onUpdate:modelValue":[i[1]||(i[1]=a=>t(e).emailCode=a),z],options:t(e).emailList},null,8,["modelValue","options"])]),o("div",pe,[N(o("input",{id:"emailAddress",class:"c-form-control",type:"text",placeholder:"이메일 주소를 입력해주세요.",title:"이메일 입력","onUpdate:modelValue":i[2]||(i[2]=a=>t(e).emailAddr=a)},null,512),[[q,t(e).emailAddr]]),o("button",{class:"c-btn c-btn-sm c-btn-sm--type02 c-btn-blue",onClick:D},T(t(e).emailText),1)]),t(e).emailSend?(n(),L(P,{key:0,modelValue:t(e).emailCheckNum,"onUpdate:modelValue":i[3]||(i[3]=a=>t(e).emailCheckNum=a)},{default:C(()=>[t(e).emailConfirm?u("",!0):(n(),L(j,{key:0,command:t(e).command,seconds:300,onEnd:Y},{default:C(()=>[fe]),_:1},8,["command"])),t(e).emailConfirm?(n(),r("p",be,[he,te(" 확인완료 ")])):u("",!0),m(p,{size:"auto",sizeType:"small",styleType:"blue",text:"인증번호확인",validator:!0,onClick:R})]),_:1},8,["modelValue"])):u("",!0)]),t(e).emailNumEqaul?(n(),r("div",ve," * 인증번호가 일치하지 않습니다. ")):u("",!0),t(e).emailTimer&&!t(e).emailConfirm?(n(),r("div",Ce," * 입력시간이 초과하였습니다. ")):u("",!0),t(e).emailConfirm?(n(),r("div",ge," * 인증 되었습니다. ")):u("",!0)]),o("div",ye,[o("div",ke,[o("button",{type:"submit",class:"c-btn c-btn-blue",onClick:i[4]||(i[4]=a=>y(!1))}," 닫기 "),o("button",{type:"submit",class:"c-btn c-btn-danger",onClick:i[5]||(i[5]=a=>y(!0))}," 확인 ")])])]),_:1},8,["data"]),o("div",xe,[o("h1",null,T(("uGetSubtitle"in s?s.uGetSubtitle:t(se))(2)),1),m(ce,{active:2}),o("div",Ee,[t(e).age14<14?(n(),r("div",Te,[Ie,("isEqual"in s?s.isEqual:t(l.isEqual))(t(e).isAgree,"Y")?(n(),r("div",Ne,[qe,m(E,{modelValue:t(e).termsList,"onUpdate:modelValue":i[7]||(i[7]=a=>t(e).termsList=a),onTerms:k,onChange:U},null,8,["modelValue"])])):u("",!0)])):(n(),r("div",Le,[("isEqual"in s?s.isEqual:t(l.isEqual))(t(e).isAgree,"Y")?(n(),r(I,{key:0},[Me,o("div",Se,[Ae,m(E,{modelValue:t(e).termsList,"onUpdate:modelValue":i[8]||(i[8]=a=>t(e).termsList=a),onTerms:k},null,8,["modelValue"])])],64)):u("",!0),("isEqual"in s?s.isEqual:t(l.isEqual))(t(e).isCerti,"Y")?(n(),r("div",Ve,[o("div",we,[ze,o("div",Ye,[De,Re,m(p,{class:"c-box-btn",size:"auto",sizeType:"small",styleType:t(e).btnDisabled?"blue":"primary",text:t(e).btnText,onClick:A},null,8,["styleType","text"])]),o("div",Ue,[$e,je,m(p,{class:"c-box-btn",size:"auto",sizeType:"small",styleType:t(e).btnDisabled?"blue":"primary",text:t(e).btnText,onClick:w},null,8,["styleType","text"])])])])):u("",!0)]))]),o("div",Pe,[o("div",Be,[m(p,{size:"auto",sizeType:"large",styleType:"blue",text:"이전",onClick:M}),m(p,{size:"auto",sizeType:"large",styleType:"danger",text:t(e).btnTxt,onClick:S,validator:t(e).checkMob},null,8,["text","validator"])])])])],64)}}},et=F(Ge,[["__scopeId","data-v-013652c5"]]);export{et as default};
