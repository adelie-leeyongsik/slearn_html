import{_ as V}from"./breadCrumbs.86a21415.js";import{_ as M}from"./title.fb65f11f.js";import{_ as N}from"./Select.c0424bc0.js";import{_ as z}from"./Input.9ccbf189.js";import{_ as R}from"./AttachFile.14cc9ce2.js";import{j as U,f as D,V as K,k as O,r as $,l as s,ab as P,g as A,h as g,Z as H,c as b,b as n,a as i,D as L,i as r,d as C,X as j,aR as G,o as q,J,I as Q}from"./entry.e1c54084.js";import{T as v}from"./index.e40167c5.js";import"./ko-kr.09136cbc.js";import X from"./_snb.5c7ca73e.js";import Z from"./_snbTablet.5be258ab.js";import"./Radio.ef28b89a.js";import"./1.5c1c421a.js";const W={class:"mypage"},Y={class:"mypage-inquiry"},ee={class:"mypage__wrap"},te={class:"mypage__contents"},oe={class:"mypage__contents-head"},ie={class:"mypage__contents-body"},se={class:"mypage__contents-write"},ne=i("div",{class:"c-text-caution__wrap"},[i("div",{class:"c-text-caution c-text-caution--type02"},[i("span",{class:"c-text-danger"},"*"),C(" 표시는 필수 입력사항입니다. ")])],-1),ae={class:"c-form-group"},re={class:"c-form-group"},le={class:"c-form-group"},de=["for"],ce=i("span",{class:"c-text-danger"},"*",-1),pe=["onKeydown"],ue={key:0,class:"c-btn-group"},me={key:1,class:"c-btn-group"},xe={__name:"index",setup(fe){const m=U(),h=D(),E=K(),d=O(),p=G(),e=$({isEdit:!s.isEmpty(m.query.seq),boardSeq:"",title:"",inquiryType:"",inquiryTypeList:[],content:"",taKey:P("ta"),editor:null,fileInfoList:[],delFileInfoList:[]});A(()=>{p.el=E.value,e.editor=new v(p);let t=document.getElementsByClassName("toastui-editor-pseudo-clipboard"),o=document.getElementsByClassName("more toastui-editor-toolbar-icons");s.isEmpty(t)||(t[0].title="글쓰기 텍스트박스"),s.isEmpty(o)||(o[0].ariaLabel="더보기"),x(),s.isEmpty(m.query.seq)||F()});const x=()=>g({method:"get",id:"1:1 문의 카테고리 조회",endpoint:"/api/sq/board/qna/category",headers:"PUBLIC",data:{},onResponse({data:t,status:o}){s.isEmpty(t)||(e.inquiryTypeList=t.map(l=>({text:l.codeName,value:l.codeId})))}}),F=async()=>{await g({id:"마이페이지 > 1:1문의 수정상세",endpoint:"/api/sq/board/qna/detail",headers:"PUBLIC",data:{boardSeq:m.query.seq},onResponse({data:t}){return e.boardSeq=t.board.boardSeq,e.inquiryType=t.board.boardCateCode,e.title=t.board.title,e.content=t.board.description,e.fileInfoList=t.board.files,s.isEmpty(e.fileInfoList)||e.fileInfoList.forEach(o=>{o.name=o.origFileName}),!0}})};H(()=>e.content,t=>{p.initialValue=t,e.editor=new v(p)});const w=t=>{e.fileInfoList=t},B=t=>{e.delFileInfoList=t},S=async()=>{if(s.isEmpty(e.inquiryType))return d.alert("알림","카테고리를 선택해야합니다."),!1;if(s.isEmpty(e.title))return d.alert("알림","제목을 입력해야합니다."),!1;if(e.title.length<2)return d.alert("알림","제목은 2글자 이상 작성하셔야 합니다."),!1;let t=e.editor.getHTML()==="<p><br></p>"?"":e.editor.getHTML().replace("<p>","").replace("</p>","");return s.isEmpty(t)?(d.alert("알림","내용을 입력해야합니다."),!1):t.length<10?(d.alert("알림","내용은 10글자 이상 작성하셔야 합니다."),!1):!!await Q(e.title,t)},T=()=>{S().then(t=>{if(t){let o="post",l="/api/sq/board/qna/create";e.isEdit&&(o="put",l="/api/sq/board/qna/update");const a=new FormData;a.append("boardCateCode",e.inquiryType),a.append("title",e.title),a.append("description",e.editor.getHTML()),e.isEdit&&(a.append("boardSeq",e.boardSeq),a.append("delFileSeqList",e.delFileInfoList)),s.isEmpty(e.fileInfoList)||e.fileInfoList.forEach(c=>{s.isEmpty(c.fileSeq)&&a.append("files",c)}),g({method:o,id:"1:1 문의 등록/수정",endpoint:l,headers:"FILE_UPLOAD",data:a,onResponse({data:c,status:f,message:y}){console.log("data",c),s.isEqual(f,200)?h.push("/mypage/inquiry"):console.log("message",y)}})}})},I=()=>{d.alert("알림","이미 작성된 내용이 있습니다. <br/>확인 버튼을 누르시면, 작성내용이 사라지고 목록으로 이동합니다",()=>{h.push("/mypage/inquiry")})},k=()=>{document.activeElement.className.indexOf("toastui-editor-contents")!=-1&&document.getElementById("file").focus()};return(t,o)=>{const l=V,a=M,c=N,f=z,y=R,u=J;return q(),b("div",W,[n(Z,{currentUrl:"/mypage/inquiry"}),n(l),i("div",Y,[i("div",ee,[n(X,{currentUrl:"/mypage/inquiry"}),i("div",te,[i("div",oe,[n(a,{title:"1:1 문의 내역",desc:`사이트 이용 질문을 남겨주세요<br />\r
                도움이 필요하실 땐 서울런 고객센터<br\r
                  class='c-mo'\r
                />(1533-0909)로 연락주세요!`})]),i("div",ie,[i("div",se,[ne,i("form",{onSubmit:o[2]||(o[2]=L(()=>{},["prevent"]))},[i("fieldset",null,[i("div",ae,[n(c,{label:"카테고리",modelValue:r(e).inquiryType,"onUpdate:modelValue":o[0]||(o[0]=_=>r(e).inquiryType=_),options:r(e).inquiryTypeList,placeholder:"선택하세요.",isRequireMark:!0},null,8,["modelValue","options"])]),i("div",re,[n(f,{modelValue:r(e).title,"onUpdate:modelValue":o[1]||(o[1]=_=>r(e).title=_),label:"제목",placeholder:"제목을 입력해주세요.",isRequireMark:!0},null,8,["modelValue"])]),i("div",le,[i("label",{for:r(e).taKey,class:"c-form-label"},[ce,C(" 내용")],8,de),i("div",{id:"editorContent",ref_key:"editorContent",ref:E,onKeydown:j(k,["tab"])},null,40,pe)]),n(y,{labelTitle:"파일 첨부",caution:!0,dataList:r(e).fileInfoList,onOnFileInfo:w,onOnDelFileInfo:L(B,["prevent"]),boardName:"inquiry"},null,8,["dataList","onOnDelFileInfo"]),r(e).isEdit?(q(),b("div",me,[n(u,{size:"auto",sizeType:"large",styleType:"danger",text:"수정하기",onConfirm:T}),n(u,{sizeType:"large",styleType:"blue",size:"auto",text:"취소하기",onClick:I})])):(q(),b("div",ue,[n(u,{size:"auto",sizeType:"large",styleType:"inactive",text:"등록하기",onConfirm:T}),n(u,{sizeType:"large",styleType:"blue",size:"auto",text:"취소하기",onClick:I})]))])],32)])])])])])])}}};export{xe as default};
