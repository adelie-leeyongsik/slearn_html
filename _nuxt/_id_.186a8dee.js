import{_ as H}from"./breadCrumbs.86a21415.js";import{k as W,j as A,f as x,r as O,g as j,l,x as w,h as u,m as b,C as h,c as o,b as q,a as s,t as v,i as n,F as M,s as T,v as _,d as U,n as J,H as K,I as Q,J as X,o as a,D as Z,K as ee,y as te,B as ne}from"./entry.e1c54084.js";import{_ as se}from"./comments.1143f183.js";import{_ as ie}from"./ch-event.d72e6cea.js";import"./pagination.86fa1564.js";import"./2.eecac130.js";import"./ic-reply-noimg.f5ddda7d.js";const oe={class:"event"},ae={class:"event-view"},re={class:"event-view__title"},le={class:"event-view__contents"},ce={class:"event-view__contents-head"},de={key:0,class:"c-form-group"},pe=s("div",{class:"c-form-label"},"첨부파일",-1),ve=["onClick"],ue={key:0,class:"event-view__contents-win"},_e={key:0},me={key:1},ge=s("br",null,null,-1),he={class:"event-view__contents-win-confirm"},ye=K('<li><div class="c-badge c-badge-lg">확인 01</div><strong>회원정보를 꼭! 확인하세요~</strong><span>회원정보에 있는 내용으로 경품이 발송됩니다.<br> * 실물 상품은 주소 / 기프티콘은 핸드폰 번호</span><a href="/mypage/pw-check">회원정보 수정 바로가기</a></li><li><div class="c-badge c-badge-lg">확인 02</div><strong>궁금하신 사항이 있으신가요?</strong><span>고객센터로 문의하시면<br> 궁금하신 사항을 해결하실 수 있습니다.</span><a href="/mypage/inquiry/write">1:1문의 바로가기</a></li>',2),fe={key:0},we=s("div",{class:"c-badge c-badge-lg"},"확인 03",-1),be=s("strong",null,"경품 선택 기한을 확인하세요.",-1),Se={class:"c-form-group"},De={key:0,class:"c-form-check-group c-form-check-group-1st"},Ye={class:"c-form-check"},qe=s("div",{class:"c-form-check-group-1st__text"},"당첨",-1),Ce=s("input",{class:"c-btn-check",type:"radio",name:"eventWin",id:"eventWin01",checked:""},null,-1),ke={class:"c-btn c-btn-lg c-btn-block c-btn-outline-secondary",for:"eventWin01"},Ee={key:1,class:"c-form-check-group"},Me={class:"c-form-check"},Te=["value","id","checked","disabled"],Ue=["for"],Le={key:2,class:"end-text",style:{"font-size":"1.6rem","margin-top":"4rem"}},Pe=s("br",null,null,-1),ze={key:1,class:"c-btn-group"},Ve={key:0},Ie={key:1},Re=s("br",null,null,-1),$e=["innerHTML"],Fe={key:2,class:"event-view__contents-banner"},Ne=s("img",{src:ie,alt:"1:1 문의하기 이미지"},null,-1),Ge=s("div",{class:"event-view__contents-banner-text"},[s("p",null,"이벤트에 대해 궁금하신게 있으신가요?"),s("span",null,"빠르고 정확하게 도움이 필요하실 땐 서울런 고객센터(1533-0909)로 연락주세요!")],-1),Be={class:"c-btn-group"},Qe={__name:"[id]",setup(He){const d=W(),L=A(),C=x(),e=O({eventSeq:L.params.id,selectGivewaySeq:"",detail:{},commentList:[],pageSize:10,pageNumber:0,order:"DESC",sort:"eventSeq",fileYn:!1,urlCnt:0,secretYn:!1,seqInfo:{},isTarget:!1,isPrize:!1,giveaway:[],checkGivewayValue:"",win:{}});j(()=>{P(),m()});const P=async()=>{await R().then(function(){V()})},z=async()=>{await u({id:"내가 응모한 이벤트 상세 조회",endpoint:"/api/sq/myevent/detail",headers:"PUBLIC",data:{eventSeq:e.eventSeq},onResponse({data:t}){return console.log("내가 응모한 이벤트 상세 조회 >> ",t),e.selectGivewaySeq=t.winner.giveSeq,e.isPrize=t.winStatus==="당첨",e.win=t,e.checkGivewayValue=t.winner.giveSeq,console.log(">>>>>>>>당첨여부>>>>",e.winner.giveSeq),!0}})},V=async()=>{l.isEmpty(w("userid"))||await u({id:"마이페이지 이벤트 당첨 조회",endpoint:"/api/sq/myevent/giveway",headers:"PUBLIC",data:{eventSeq:e.eventSeq,eventPrizeType:e.detail.eventPrizeType},onResponse({data:t}){return console.log("이벤트 당첨 조회 >> ",t),e.detail.isEnd=b().isAfter(e.detail.seltEndDt)&&b(e.detail.seltEndDt).format("YYYY.MM.DD")!=b().format("YYYY.MM.DD"),e.giveaway=t.eventGiveaways,l.isEmpty(t.event)||z(),!0}})},I=()=>{if(e.checkGivewayValue==""){d.alert("알림","경품을 선택하지 않으셨습니다. 선택 후 다시 시도해주세요");return}d.confirm("알림","선택하시겠습니까?",async()=>{await u({id:"이벤트 선물 지정",endpoint:`/api/sq/myevent/giveway?eventSeq=${e.eventSeq}&eventGiveSeq=${e.checkGivewayValue}`,headers:"PUBLIC",method:"put",onResponse({data:t}){return d.alert("알림","경품이 선택되었습니다"),!0}})})},R=async()=>{await u({id:"이벤트 상세",endpoint:`/api/sq/event/${e.eventSeq}`,onResponse({data:t}){console.log("이벤트 상세 - ",t),t.title=(S(t.atteEndDt)?"[마감] ":"")+t.title,e.fileYn=l.isEqual(t.comtFileUseYn,"Y"),e.urlCnt=t.eventCateCode==="S"?t.shareUrlCnt:0,e.secretYn=l.isEqual(t.secretYn,"Y"),e.detail=t}})},m=async()=>{await u({id:"이벤트 상세 댓글",endpoint:"/api/sq/event/comment/"+e.eventSeq,data:{pageSize:e.pageSize,pageNumber:e.pageNumber,order:e.order,sort:e.sort},onResponse({code:t,data:i}){console.log("이벤트 댓글,",i),e.commentList=i}})},$=t=>{e.pageNumber=t,m()},S=t=>{if(!l.isEmpty(t))return b().format("YYYYMMDD")>h(t,"YYYYMMDD")},F=async t=>{if(console.log("goSaveComment ",t),l.isEmpty(t.description)){d.alert("알림","댓글을 입력해주세요.");return}if(e.urlCnt>0&&l.isEmpty(t.shareUrl1)&&l.isEmpty(t.shareUrl2)&&l.isEmpty(t.shareUrl3)){d.alert("알림","주소를 입력해주세요.");return}if(!await Q("",t.description))return;const r=e.detail.schlLevelCode.split("");switch(w("schlLevel")){case"SCHLVL_P001":e.isTarget=r[0]==1;break;case"SCHLVL_P002":e.isTarget=r[1]==1;break;case"SCHLVL_P003":e.isTarget=r[2]==1;break;case"SCHLVL_P004":e.isTarget=r[3]==1;break}if(e.isTarget=r[4]==1&&w("mentorYn")==="Y",e.isTarget=r[5]==1&&w("memberTypeCode")==="JOINKND_001",!e.isTarget){d.alert("알림","이벤트 대상자가 아닙니다.");return}const p=new FormData;p.append("description",t.description),p.append("secretYn",t.secretYn?"Y":"N"),p.append("shareUrl1",t.shareUrl1),p.append("shareUrl2",t.shareUrl2),p.append("shareUrl3",t.shareUrl3),l.isEmpty(t.file)||t.file.forEach(g=>{p.append("file",g)}),await u({method:"post",id:"댓글 저장",endpoint:"/api/sq/event/comment/"+e.eventSeq,headers:"FILE_UPLOAD",data:p,onResponse({data:g,status:f,message:D}){f===200&&(d.alert("알림","댓글이 입력되었습니다."),m())}})},N=t=>{const i=new FormData;i.append("description",t.description),i.append("secretYn",t.secretYn?"Y":"N"),i.append("shareUrl1",t.shareUrl1),i.append("shareUrl2",t.shareUrl2),i.append("shareUrl3",t.shareUrl3),l.isEmpty(t.file)||t.file.forEach(r=>{i.append("file",r)}),u({method:"put",id:"댓글 수정",endpoint:`/api/sq/event/comment/${t.eventSeq}/${t.comtSeq}`,headers:"FILE_UPLOAD",data:i,onResponse({data:r,status:y}){y===200&&(d.alert("알림","수정되었습니다."),m())}})},G=t=>{e.seqInfo={eventSeq:t.eventSeq,comtSeq:t.comtSeq},u({method:"delete",id:"댓글 삭제",endpoint:`/api/sq/event/comment/${e.seqInfo.eventSeq}/${e.seqInfo.comtSeq}`,onResponse({data:i,status:r}){r===200&&(d.alert("알림","삭제되었습니다."),m())}})};return(t,i)=>{var g,f,D,k;const r=H,y=X,p=se;return a(),o("div",oe,[q(r),s("div",ae,[s("div",re,[s("p",null,v(n(e).detail.title),1),s("span",null,v(("uConvertDate"in t?t.uConvertDate:n(h))(n(e).detail.atteStartDt,"YYYY.MM.DD"))+" ~ "+v(("uConvertDate"in t?t.uConvertDate:n(h))(n(e).detail.atteEndDt,"YYYY.MM.DD")),1)]),s("div",le,[s("div",ce,[((f=(g=n(e).detail)==null?void 0:g.files)==null?void 0:f.length)>0?(a(),o("div",de,[pe,s("ul",null,[(a(!0),o(M,null,T(n(e).detail.files,c=>(a(),o("li",null,[s("a",{href:"javascript:void(0)",onClick:Z(Y=>("uFileDownload"in t?t.uFileDownload:n(ee))(c.fileSeq),["prevent"]),class:"c-badge c-badge-lg c-badge-light"},[s("p",null,v(c.origFileName),1)],8,ve)]))),256))])])):_("",!0)]),n(e).isPrize?(a(),o("div",ue,[n(e).detail.eventPrizeType=="R1"||n(e).detail.eventPrizeType=="RM"?(a(),o("h3",_e," 본 이벤트 "+v(n(e).win.winner.rankCode)+"등에 당첨되셨습니다. ",1)):(a(),o("h3",me,[U(" 축하드립니다!"),ge,s("span",null,v(n(e).detail.title),1),U("에 당첨되셨습니다! ")])),s("div",he,[s("ul",null,[ye,n(e).detail.eventPrizeType==="SM"||n(e).detail.eventPrizeType==="RM"?(a(),o("li",fe,[we,be,s("span",null,v(`${("uConvertDate"in t?t.uConvertDate:n(h))(n(e).detail.seltStartDt,"YYYY.MM.DD")}~${("uConvertDate"in t?t.uConvertDate:n(h))(n(e).detail.seltEndDt,"YYYY.MM.DD")}`),1)])):_("",!0)])]),s("div",Se,[((D=n(e).giveaway)==null?void 0:D.length)===1?(a(),o("div",De,[s("div",Ye,[qe,Ce,s("label",ke,[s("strong",null,v(n(e).giveaway[0].title),1)])])])):(a(),o("div",Ee,[(a(!0),o(M,null,T(n(e).giveaway,c=>{var Y,E;return a(),o("div",Me,[te(s("input",{class:"c-btn-check",type:"radio",name:"eventWin",value:c.giveSeq,"onUpdate:modelValue":i[0]||(i[0]=B=>n(e).checkGivewayValue=B),id:`eventWin${c.giveSeq}`,checked:c.giveSeq==((E=(Y=n(e).win)==null?void 0:Y.winner)==null?void 0:E.giveSeq),disabled:n(e).detail.isEnd},null,8,Te),[[ne,n(e).checkGivewayValue]]),s("label",{class:"c-btn c-btn-lg c-btn-block c-btn-outline-secondary",for:`eventWin${c.giveSeq}`},[s("strong",null,v(c.title),1)],8,Ue)])}),256))]))]),n(e).detail.isEnd?(a(),o("div",Le," 경품 선택기한이 종료되었습니다. 고객센터에 문의해 주시길 바랍니다. ")):_("",!0),Pe])):_("",!0),(n(e).detail.eventPrizeType==="SM"||n(e).detail.eventPrizeType==="RM")&&!n(e).detail.isEnd&&((k=n(e).giveaway)==null?void 0:k.length)>1?(a(),o("div",ze,[s("button",{class:"c-btn c-btn-lg c-btn-danger",onClick:I},[n(e).selectGivewaySeq!=""?(a(),o("strong",Ve,"다시 선택하기")):(a(),o("strong",Ie,"선택하기"))])])):_("",!0),Re,s("div",{class:J(["event-view__contents-img",{"event-view__contents-img--end":S(n(e).detail.atteEndDt)}]),innerHTML:n(e).detail.description},null,10,$e),n(e).isPrize?_("",!0):(a(),o("div",Fe,[Ne,Ge,s("button",{class:"c-btn c-btn-sm c-btn-blue",onClick:i[1]||(i[1]=c=>n(C).push("/mypage/inquiry/write"))}," 1:1 문의하기 ")]))]),s("div",Be,[q(y,{onClick:i[2]||(i[2]=c=>n(C).go(-1)),size:"auto",isBold:!0,sizeType:"large",styleType:"danger",text:"목록으로"})]),q(p,{data:n(e).commentList,isWrite:!S(n(e).detail.atteEndDt),isFile:n(e).fileYn,urlCnt:n(e).urlCnt,isUrl:n(e).urlCnt>0,isSecret:n(e).secretYn,boardType:"event",onChangedPageIndex:$,onHandleSubmit:F,onHandleModifySubmit:N,onHandleDeleteSubmit:G},null,8,["data","isWrite","isFile","urlCnt","isUrl","isSecret"])])])}}};export{Qe as default};
