import{_ as k}from"./breadCrumbs.86a21415.js";import{_ as x}from"./title.fb65f11f.js";import{k as F,r as B,g as M,h as f,c as r,b as d,i as l,a as s,F as u,s as g,v as $,d as _,l as I,J as D,o as a,n as y,t as C}from"./entry.e1c54084.js";import{_ as q,a as z}from"./interest02.8272bd25.js";import N from"./_snb.5c7ca73e.js";import V from"./_snbTablet.5be258ab.js";import L from"./interestModal.9e6a67cd.js";import"./1.5c1c421a.js";import"./CommonContentsModal.1a643f7e.js";import"./ch-management.fd76c6e1.js";const j={class:"mypage"},U={class:"mypage-report"},A={class:"mypage__wrap"},J={class:"mypage__contents"},O={class:"mypage__contents-head"},G={class:"mypage__contents-body"},H={class:"interest"},K={class:"interest-item"},Q=s("div",{class:"interest-item__image"},[s("img",{src:q,alt:"관심사 설정 이미지",style:{width:"98px"}})],-1),W=s("div",{class:"interest-item__title"},[s("strong",null,[_("서울런에서 추천 받고 싶은 강좌나"),s("br"),_(" 문화, 전시, 공연 주제를 선택해 주세요.")]),_("(최대 2가지) ")],-1),X=s("div",{class:"interest-item__text"}," 나의 관심사를 잘 모르겠다면 이미지로 골라보세요! ",-1),Y={class:"interest-item__button"},Z={class:"interest-item__chips"},ee={key:0},se=["onClick"],te={key:0,class:"interest-item"},oe=s("div",{class:"interest-item__image"},[s("img",{src:z,alt:"흥미 키워드 이미지",style:{width:"99px"}})],-1),ne=s("div",{class:"interest-item__title"},[s("strong",null,[_("평소에 궁금했던 지원사업이나"),s("br"),_(" 정책 정보와 관련된 키워드를 선택해 주세요.")]),_("(최대 2가지) ")],-1),ie={class:"interest-item__chips"},re={key:0},ae=["onClick"],le={class:"c-btn-group"},ce={name:"Calendar",data(){return{edu01:!1,edu02:!1,edu03:!1,edu04:!1}}},Ee=Object.assign(ce,{setup(de){const P=F(),e=B({isShowBtn:!1,isShowPolicy:!0,isShowModal:!1,selectTags:{},cultureTags:[],policyTags:[]});M(()=>{const t=sessionStorage.getItem("age");e.isShowPolicy=t>=19&&t<=39,e.isShowPolicy=!0,E()});const E=async()=>{await v().then(function(){R(),T()})},R=async()=>{await f({id:"관심사 리스트 조회",endpoint:"/api/sq/prefer/list",data:{preferCode:"PREFER_P01"},onResponse({data:t}){return e.cultureTags=t,!0}})},T=async()=>{await f({id:"정책정보 리스트 조회",endpoint:"/api/sq/prefer/list",data:{preferCode:"PREFER_P02"},onResponse({data:t}){return console.log("정책정보>>",t),e.policyTags=t,!0}})},v=()=>new Promise(function(t,n){f({id:"내 관심 정책 정보 조회",endpoint:"/api/sq/my/prefer",onResponse({data:o}){return console.log("내관심>",o),e.selectTags.PREFER_P02=o.filter(c=>c.preferCode==="PREFER_P02"),e.selectTags.PREFER_P01=o.filter(c=>c.preferCode==="PREFER_P01"),t(),!0}})}),h=(t,n)=>{e.isShowBtn=!0;const o=e.selectTags[t],c=o.findIndex(m=>m.stdClsCode===n.stdClsCode);if(c!==-1){o.splice(c,1);return}o.length>=2&&o.shift(),o.push(n)},w=async()=>{const t=e.selectTags.PREFER_P01.map(o=>o.stdClsCode),n=e.selectTags.PREFER_P02.map(o=>o.stdClsCode);console.log(t,n),await f({id:"정책정보 저장",endpoint:"/api/sq/my/prefer",method:"post",data:{preferList:t,policyList:n},onResponse(){return P.alert("알림","저장되었습니다."),e.isShowBtn=!1,!0}})},S=t=>{I.isEmpty(t)||(e.selectTags.PREFER_P01=[],t.filter(n=>n.preferCode.charAt(0)==="S").sort((n,o)=>o.count-n.count).slice(0,2).forEach(n=>{e.selectTags.PREFER_P01.push({preferCode:"PREFER_P01",stdClsCode:n.preferCode,stdClsTxt:n.preferTitle})}),e.isShowBtn=!0),e.isShowModal=!1};return(t,n)=>{const o=k,c=x,m=D;return a(),r(u,null,[d(L,{isShow:l(e).isShowModal,onConfirm:S},null,8,["isShow"]),s("div",j,[d(V,{currentUrl:"/mypage/interest-settings"}),d(o),s("div",U,[s("div",A,[d(N,{currentUrl:"/mypage/interest-settings"}),s("div",J,[s("div",O,[d(c,{title:"나의 관심사 설정",desc:`설정한 관심사에 따라 유튜브, 테드, 공연, 정책 정보 등의 추천\r
                내역이 달라져요, 관심있는 분야를 관리해보세요.<br />\r
                도움이 필요하실 땐 서울런 고객센터(1533-0909)로 연락주세요!`})]),s("div",G,[s("div",H,[s("div",K,[Q,W,X,s("div",Y,[d(m,{size:"auto",styleType:"blue",text:"관심사 선택 Start!",onClick:n[0]||(n[0]=i=>l(e).isShowModal=!0)})]),s("div",Z,[(a(!0),r(u,null,g(l(e).cultureTags,(i,b)=>(a(),r(u,null,[i.preferTitle?(a(),r("button",{key:1,class:y(["c-chips",{active:l(e).selectTags.PREFER_P01.find(p=>p.stdClsCode===i.stdClsCode)}]),onClick:p=>h("PREFER_P01",i)}," # "+C(i.stdClsTxt),11,se)):(a(),r("br",ee))],64))),256))])]),l(e).isShowPolicy?(a(),r("div",te,[oe,ne,s("div",ie,[(a(!0),r(u,null,g(l(e).policyTags,(i,b)=>(a(),r(u,null,[i.preferTitle?(a(),r("button",{key:1,class:y(["c-chips",{active:l(e).selectTags.PREFER_P02.find(p=>p.stdClsCode===i.stdClsCode)}]),onClick:p=>h("PREFER_P02",i)}," # "+C(i.stdClsTxt),11,ae)):(a(),r("br",re))],64))),256))])])):$("",!0)]),s("div",le,[d(m,{disabled:!l(e).isShowBtn,size:"auto",sizeType:"large",styleType:l(e).isShowBtn?"danger":"darkgray",isBold:!0,text:"저장하기",onClick:w},null,8,["disabled","styleType"])])])])])])])],64)}}});export{Ee as default};
